---
title: "AI 智能助手"
description: "了解如何使用 AI 助手功能获取文档摘要和智能问答"
tags: ["AI", "助手", "智能", "功能"]
category: "功能特性"
categoryId: 2
postId: 4
order: 4
date: "2024-01-05"
author: "AI 团队"
---

# AI 智能助手

我们的文档系统集成了强大的 AI 智能助手，支持流式输出和 Markdown 渲染，为您提供更加流畅和丰富的交互体验。

## 🚀 新功能特性

### ⚡ 流式输出

- **实时响应**：AI 回复内容实时流式显示，无需等待完整回复
- **打字机效果**：模拟真实对话的打字效果，提升交互体验
- **可中断输出**：支持随时停止 AI 输出，节省时间和资源
- **状态指示**：清晰的流式状态指示和光标动画

### ⚡ 流式摘要生成

- **实时摘要**：文档摘要也支持流式生成，实时显示摘要内容
- **可控生成**：支持停止摘要生成，节省API调用
- **重新生成**：一键重新生成摘要，获得不同角度的总结
- **状态指示**：清晰的"生成中..."状态提示

### 📝 Markdown 渲染

- **富文本支持**：完整支持 Markdown 格式，包括标题、列表、表格等
- **代码高亮**：自动识别和高亮显示代码块
- **数学公式**：支持 LaTeX 数学公式渲染
- **实时渲染**：流式输出过程中实时渲染 Markdown 内容

### 🎨 增强体验

- **响应式设计**：适配各种屏幕尺寸
- **流畅动画**：优雅的展开/折叠和内容更新动画
- **错误处理**：完善的错误提示和重试机制
- **性能优化**：高效的流式处理和内存管理

## 主要功能

### 🤖 智能摘要

AI 助手会自动分析文档内容，生成简洁准确的摘要：

- **自动生成**：展开 AI 助手时自动生成摘要
- **核心要点**：突出文档的关键信息和要点
- **Markdown 格式**：支持格式化的摘要显示
- **中文优化**：针对中文内容优化的摘要算法

### 💬 智能问答

支持基于文档内容的智能问答：

- **流式对话**：实时显示 AI 回复，支持中途停止
- **上下文理解**：基于当前文档内容回答问题
- **对话记忆**：保持对话上下文，支持追问
- **Markdown 回复**：AI 回复支持完整的 Markdown 格式

## 使用指南

### 查看流式摘要

1. 打开任意文档页面
2. 在标题下方找到 "AI 助手" 卡片
3. 点击展开按钮
4. AI 会自动开始流式生成文档摘要
5. 可以点击停止按钮中断生成
6. 可以点击重新生成按钮获得新的摘要

### 流式问答

1. 在问答区域的输入框中输入问题
2. 按 Enter 键或点击发送按钮
3. AI 会实时流式显示回复内容
4. 可以点击停止按钮中断输出
5. 支持继续追问相关问题

### 交互技巧

#### 流式输出控制

- **发送问题**：按 Enter 键或点击发送按钮
- **停止输出**：点击停止按钮（方形图标）或再次按 Enter
- **状态指示**：观察"输出中..."标签和光标动画

#### 摘要生成控制

- **停止生成**：点击摘要标题右侧的停止按钮
- **重新生成**：点击星形图标获得不同角度的摘要
- **状态观察**：注意"生成中..."标签和流式光标
- **错误重试**：摘要生成失败时可点击重试按钮

#### 有效的问题类型

- **内容总结**："请总结这篇文档的主要内容"
- **要点提取**："文档中提到了哪些重要概念？"
- **代码示例**："请提供相关的代码示例"
- **实践指导**："如何实际应用文档中的方法？"
- **格式化回复**："请用表格形式总结要点"

#### Markdown 格式示例

AI 助手支持丰富的 Markdown 格式回复：

\`\`\`markdown
## 主要功能

### 核心特性
- **流式输出**：实时显示回复内容
- **Markdown 渲染**：支持富文本格式
- **代码高亮**：自动语法高亮

### 代码示例
\`\`\`javascript
function example() {
  console.log("Hello, AI Assistant!");
}
\`\`\`

### 数学公式
质能方程：$E = mc^2$

### 表格
| 功能 | 状态 | 描述 |
|------|------|------|
| 流式输出 | ✅ | 实时显示 |
| Markdown | ✅ | 富文本支持 |
\`\`\`

## 配置说明

AI 助手通过环境变量进行配置：

### 必需配置

\`\`\`env
# AI 服务配置
NEXT_PUBLIC_AI_API_URL=https://api.openai.com/v1/chat/completions
NEXT_PUBLIC_AI_API_KEY=your-api-key
NEXT_PUBLIC_AI_ENABLED=true
\`\`\`

### 可选配置

\`\`\`env
# AI 模型配置
NEXT_PUBLIC_AI_MODEL=gpt-3.5-turbo
# 或使用支持流式输出的其他模型
NEXT_PUBLIC_AI_MODEL=gpt-4
\`\`\`

## 技术实现

### 流式输出

使用 Server-Sent Events (SSE) 实现流式输出：

\`\`\`typescript
async function* askQuestionStream() {
  const response = await fetch(apiUrl, {
    method: 'POST',
    body: JSON.stringify({
      ...params,
      stream: true // 启用流式输出
    })
  })

  const reader = response.body?.getReader()
  // 处理流式数据...
}
\`\`\`

### Markdown 渲染

集成 remark 和 rehype 生态系统：

\`\`\`typescript
const processor = remark()
  .use(remarkGfm)      // GitHub Flavored Markdown
  .use(remarkMath)     // 数学公式支持
  .use(remarkHtml)     // HTML 输出
  .use(rehypeKatex)    // KaTeX 渲染
  .use(rehypeHighlight) // 代码高亮
\`\`\`

### 性能优化

- **增量渲染**：流式内容增量更新，避免重复渲染
- **内存管理**：及时清理流式连接和缓存
- **错误恢复**：网络中断时的自动重连机制

## 故障排除

### 流式输出问题

1. **输出中断**：检查网络连接稳定性
2. **渲染异常**：确认 Markdown 语法正确性
3. **性能问题**：避免过长的对话历史

### Markdown 渲染问题

1. **公式不显示**：确认 KaTeX CSS 已加载
2. **代码不高亮**：检查 highlight.js 配置
3. **表格错乱**：验证表格 Markdown 语法

### API 配置问题

1. **流式不支持**：确认 API 服务支持 stream 参数
2. **权限错误**：检查 API 密钥权限
3. **模型限制**：确认模型支持流式输出

## 最佳实践

### 用户体验

1. **合理提示**：提供清晰的使用说明和示例
2. **状态反馈**：显示流式状态和进度指示
3. **错误处理**：友好的错误提示和重试机制

### 性能优化

1. **内容长度**：控制单次对话的内容长度
2. **并发限制**：避免同时发起多个流式请求
3. **缓存策略**：合理缓存摘要和常见问答

### 成本控制

1. **模型选择**：根据需求选择合适的 AI 模型
2. **Token 管理**：监控和控制 API 使用量
3. **流式中断**：支持用户主动停止输出

通过流式输出和 Markdown 渲染功能，AI 智能助手提供了更加流畅、丰富和交互性强的用户体验。
